# ER図1
## 全体

- ActiveRecordで必ず自動生成される登録日と更新日を記録するカラムがない。
- 意味のないテーブルの紐付きがある。
  - 管理人テーブルとエンドユーザーテーブル、商品テーブルが紐づいている必要がない。
- 設計上必要なテーブルが足りない。
  - 購入時の商品情報（価格など）を保存するテーブルが存在しない。
  - 配送先を管理するテーブルが存在しない。
  - ディスクテーブルが存在しない。
  - 曲テーブルが存在しない。
  - アーティストテーブルがある方が良い。
  - レーベルテーブルがある方が良い。
  - ジャンルテーブルがある方が良い。
  - 商品入荷情報を持つテーブルが存在しない。
## 管理人テーブル
  - エンドユーザーと商品に紐づく意味がない。
## エンドユーザーテーブル
  - 管理人IDが必要ない。
  - 退会状態を管理するテーブルが存在しない。
## 商品テーブル
  - 管理人IDが必要ない
  - 発売日を管理するカラムがない。
  - 商品のデイスク枚数を管理するカラムがない
  - ディスクに対して曲を管理する構造になっていない。
  - 論理削除用のカラムが存在しない。
  - ステータスカラムが何の情報を保持しているのかわからない。
  - 在庫数は計算結果のため、商品テーブルで管理するには適さない。在庫管理を行うテーブルの情報を用いて結果を出力する。
## カートテーブル
  - アーティスト名、ジャケット画像、シングル/アルバム名カラムが必要ない。商品IDからこれらのデータを参照することが可能。
  - FKにユーザーIDが必要。
  - 合計金額はカートテーブルで管理しない。
  - PKの命名がテーブル名と合っていない。
  - カートは一時テーブルで管理する必要がある。
## 決済テーブル
  - テーブル名が役割と合っていない。
  - 合計金額を決済テーブルで管理するべき。
  - 配送先テーブルと紐づいている必要がある。配送先テーブルのFKが必要(配送先テーブルも必要)
  - 送料を管理するカラムがない
  - 決済テーブルと購入履歴テーブルのリレーションが1対0or多になっている点がおかしい。決済には必ず購入履歴が存在するため1対多であるべき。
  - 購入日のカラムは、購入履歴テーブルで管理するべき。
## 購入履歴テーブル
  - PKが存在しない。
  - 購入日に関するカラムが存在しない。
  - 購入時の商品情報や購入価格などをこのテーブルで管理する必要がある。そのため、商品テーブルと紐づける必要がある。
  

# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。

<font color="Red">再提出の際はこのレビューを残しておいてください。</font>
# 指摘事項
## 全体
- 購入時の価格を保存する必要はありませんか？(購入履歴の価格も変わってしまうため)
## 商品テーブル
- 論理削除はどのように行いますか？
- ステータスカラムが何を表しているかわかりません。
- 在庫数は計算結果なのでデータとして保存するには適さないです。
## カートテーブル
- 合計金額はデータとして保存する必要がありますか？(他のものを利用できませんか？)
- PKの命名がテーブル名と合っていません。
## 決済
- テーブル名が役割と合っていません。
- 合計金額はどこで管理しますか？
- カートとのリレーションはどのように利用しますか？
- 送付先住所以外に宛名や郵便番号が必要です。
- 配送先テーブルとのリレーションは必要でしょうか？(ユーザーの登録住所に送る場合などは？)
- 購入日カラムは必要でしょうか？
- 購入履歴テーブルはどのように利用するのでしょうか？
