# テーブル定義書1
## 全体
- railsの命名規則に従ったテーブル名で記述していない。
  > テーブル名はrailsの命名規則に従った記述にしましょう。
- PKの命名はidでよくINDEXが必要。
  > railsでPKの命名はidで生成されるため、PKとしましょう。また、PKはよく検索対象のカラムになりうるのでINDEXを追加しましょう。
- created_at: カラム説明の「ユーザ」が不必要。
- updated_at: カラム説明の「ユーザ」が不必要。
  > created_atとupdated_atについて、カラム説明にユーザとありますが、管理側も登録、更新することが想定されるため不要です。
- 複数の配送先情報を格納できるように考慮されていない。
  > 現状、ユーザは1つの配送先情報しか持つことができません。複数の配送先情報を管理できるように記述しましょう。


## Admin
- id: AUTO INCREMENTがあるべき。
  > idはPKになることが想定され、AUTO INCREMENTがデフォルトで付いてくるため、追加しましょう。
- PKが指定されていない。
  > PKが指定されていません、追加しましょう。

## Users
- user_l_name: 備考に名前とあるが説明が抽象的、性の漢字が違う、INDEXがあるべき。
  > user_l_name: ユーザー名はよく検索対象のカラムになりうるのでINDEXを追加しましょう。また、備考の説明が抽象的です。
- user_f_name: NOT NULLであるべき、INDEXがあるべき。
  > user_f_name: ユーザ名はよく検索対象にカラムになりうるのでINDEXを追加しましょう。NOT NULLがないですが、現状、名は入力しなくてもいいことになってしまいます。
- user_f_name_kana: NOT NULLであるべき。
  > NOT NULLがないですが、現状、名の読みカナは入力しなくてもいいことになってしまいます。
- member_status: 型はboolean型で、備考にFALSE, TRUEそれぞれの値の意味を書くべき。
  > member_status: 想定される値は有効/無効(退会済み)の2択です。boolean型で管理しましょう。
- user_tel, zip_address: integer型だと0始まりの時に保存ができないためstring型であるべき。
  > user_tel, zip_address: integer型だと0から始まる値を保存することができません。
- userという接続語はいらない。
  > テーブル名から判断できるため、userという接続詞は必要ありません。
- カラム名に略語は不適切。
  > カラム名に略語は不適切です。

## Products
- disc_id: 1テーブルに複数の値が入る可能性があることに考慮していない。
  > disc_id: 複数のディスクを所持する場合、当該のカラムは複数の値を保持しなくてはいけなくなってしまいます。
- genre_id: FKである必要がある。
  > genre_id: 別テーブルから情報を取得してくるためのカラムであるため、FKを追加しましょう。
- label_id: FKである必要がある。
  > label_id: 別テーブルから情報を取得してくるためのカラムであるため、FKを追加しましょう。
- artist_id: FKである必要がある。
  > artist_id: 別テーブルから情報を取得してくるためのカラムであるため、FKを追加しましょう。
- cd_image: refileで管理することが想定されるため、命名の最後に_idが必要でstring型であるべき。
  > cd_image: refiled管理することが想定されるため、データ型や命名が不適切です。
- stock: 変動する事が多いため不必要。
  > stock: 在庫数は入荷数と受注数で算出し、値が変動するためカラムとして持たせるのは不適切です。
- stock_status: enumで管理し、defaultを指定するべき、備考にそれぞれのキーに対応する値を記述するべき。
  > stock_status: string型で定義していますが、入力される値のパターンが数種類に想定されるため、enumで管理してdefaultを設定し、備考にそれぞれのキーに対応する値を記述しましょう。
- productという接続語はいらない。
  > テーブル名から判断できるため、productという接続詞は必要ありません。
## Discs
- products_id: 単数形でよい。
  > 外部キーは単数形で命名しましょう。
- track_num: 命名が曖昧で役割が分かりづらい。
  > stack_num: 命名が曖昧で役割が理解されづらいです。disc_numt等としましょう。
- ディスク名を管理できるように考慮していない。
  > ディスク名を管理できるよう、カラムを追加しましょう。
- discという接続語はいらない。
  > テーブル名から判断できるため、discという接続詞は必要ありません。

## Songs
- song: 命名が分かりづらい、カラムの説明と型が一致していない。
  > song: 命名が曖昧で役割が理解されづらいです、カラム説明通り、曲名を管理するカラムならば、name等としましょう。また曲名の場合、型がinteger型と適切ではありません。
- PKがない。
  > PKが指定されていません、追加しましょう。
- 曲順を管理できるよう考慮していない。
  > 現在、ディスクにおけるそれぞれの曲順をどのように管理していますか。

## Labels
- products_id: 不必要、Products側から呼び出されるべき。
  > products_id: レーベルは複数の商品に属することが予想されます。そのため、このカラムには複数の商品idが入る可能性があり、適切ではありません。
- label: カラム説明含めて役割が分かりづらい。
  > label: 命名が曖昧で役割が理解されづらいです。name等としましょう。
- PKがない。
  > PKが指定されていません、追加しましょう。

## Artists
- products_id: 不必要、Products側から呼び出されるべき。
  > products_id: アーティストは複数の商品に属することが予想されます。そのため、このカラムには複数の商品idが入る可能性があり、適切ではありません。
- artist: 命名が分かりづらい、文字列を保存できる型でない。
  > artist: 命名が曖昧で役割が理解されづらいです。name等としましょう。
- アーティスト名の読み仮名を管理できるように考慮されていない。
  > アーティスト名についてだけでなく、アーティスト名の読みカナについても管理できるようカラムを追加しましょう。
- PKがない。
  > PKが指定されていません、追加しましょう。 

## Genre
- products_id: 不必要、Products側から呼び出されるべき。
  > products_id: ジャンルは複数の商品に属することが予想されます。そのため、このカラムには複数の商品idが入る可能性があり、適切ではありません。
- genre: 命名が分かりづらい、文字列を保存できる型でない。
  > 命名が曖昧で役割が理解されづらいです。name等としましょう。

## Cart item
- user_id: AUTO INCREMENT、INDEXは不必要。
  > FKであるuser_idにAUTO INCREMENTがあると、cart_itemが生成されるたびにuser_idが増える事になります。また、user_idが検索対象になる頻度は高くないため、INDEXは不必要であると考えられます。
- products_id: 単数形で命名するべき、データ型を記述していない。
  > products_id: railsのFKの命名規則に則ると単数形で記述する必要があります。また、データ型が指定されていません。
- buy num: railsの命名規則に則っていない。
  > buy_num: railsの命名規則に則って命名しましょう。
- subtotal: buy numと商品の価格から算出できるため不必要。
  > buntotal: 商品の価格とbuy num空算術できるためカラムとして盛らせる必要がありません。
- PKがない。
  > PKがあいません、指定しましょう。

## Buy details
- buy num: railsの命名規則に則っていない。
  > buy num: railsの命名規則に則って命名しましょう。
- どのBuyの詳細なのか情報が不足している。
- Buyの中のどのProductの詳細なのか情報が不足している。
  > 現状、どのBuyの詳細なのか情報が不足しています。また、Buyの中でもどの商品7日の情報目測しています。
- 管理側に考慮した命名でない。
  > テーブル名は管理側始点で命名しましょう。
- 購入時の価格を保存するカラムがない。
  > 購入時価格はどのように管理しているでしょうか。商品合計と購入数から算出する場合、商品の価格が変更された場合、受注済みの受注詳細の金額も変わってしまいます。

## Buy
- buy_details: 1テーブルに複数の値が入る可能性があることに考慮していない。
  > buy_details: 一度に複数の商品を購入した際、1Buyの中に複数の値が入ることが予想されます。位置レコードに複数の値が入ることは設計上適切ではないです。
- pay: 役割が理解しづらい命名、enumで管理し、備考にキーに対応する値を記述するべき。
  > pay: 命名が曖昧で役割が理解されづらいです。payment_way等としましょう。また支払方法はいくつかに限定されるため、enumで管理し、それぞれのキーの値を備考に記述しましょう。
- stock: カラムの説明と命名に矛盾がある。
  > stock: カラム説明とカラム名が一致していません。
- buy_at: 不必要。created_atと役割が同一。
  > buy_atは購入日時を管理するカラムとありますが、created_atとの違いはなんでしょうか。もしなければ不要です。
- 管理側に考慮した命名でない。
  > テーブル名は管理側視点で命名しましょう。

# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。
# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。

## 指摘事項
## users
- カラム名に略語は不適です。
- member_statusがstring型になっています。
- 郵便番号、電話番号がinteger型だと0始まりの時に保存ができません。
- userという接頭辞が必要ありません。(テーブルから判断できるため)

## products
- productという接頭辞が必要ありません。(テーブルから判断できるため)

## discs
- discという接頭辞が必要ありません。(テーブルから判断できるため)

## レビュー
- 合格です
